<div class="container rounded-container">
  <div class="row mb-3 mt-3">
    <div class="col-12 p-0 d-flex justify-content-center">
      <div class="container-cards-show">
        <% @flat.photos.each do |photo| %>
          <%= cl_image_tag photo.key, height: 200, width: 350, crop: :fill %>
        <% end %>
      </div>
    </div>
  </div>
  <div class="row mb-5 mt-5">
    <div class="col-6">
      <div class="card-flat-description-show">
      <h2><%= @flat.title %></h2>
      <p><%= @flat.description %></p>
      <p>Number of guests allowed: <%= @flat.number_of_guests %></p>
      <p><%= @flat.price_per_day %>$ per day</p>
      <p>Address: <%= @flat.address %></p>
      <p>Available from <%= @flat.availability_start.strftime("%B %d %Y") %> to <%= @flat.availability_end.strftime("%B %d %Y") %></p>
      <% if current_user == @flat.user %>
        <p><%= link_to "Delete flat",
                        dashboard_flats_path,
                        method: :delete,
                        data: { confirm: "Are you sure?" },
                        class: "btn btn-danger" %></p>
      <% end %>
      </div>
    </div>
    <div class="col-6">
      <% if current_user != @flat.user %>
        <h2>New reservation for <%= @flat.title %></h2>
        <%= simple_form_for([@flat, @reservation]) do |f| %>
          <%= f.input :reservation_start %>
          <%= f.input :reservation_end %>
          <%= f.input :number_of_guests %>
          <%= f.submit "Book the flat", class: "btn blue-btn"%>
        <% end %>
      <% end %>
    </div>
  </div>
  <div id="map"
        style="width: 100%; height: 400px;"
        data-markers="<%= @marker.to_json %>"
        data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
        class="mb-5 mt-5">
      </div>
  <%= link_to "Back to flats", flats_path, class: "btn lavander-btn" %>
</div>
